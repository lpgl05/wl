# 中英文括号支持说明

## ✅ 功能更新

现在区间语法同时支持**英文括号**和**中文括号**!

---

## 📝 使用方法

### 方式1: 英文括号(推荐)
```
DX252366(01-06)01
```

### 方式2: 中文括号
```
DX252366（01-06）01
```

### 两种方式展开结果完全相同:
```
DX2523660101
DX2523660201
DX2523660301
DX2523660401
DX2523660501
DX2523660601
```

---

## ⚠️ 注意事项

### ✅ 正确用法(括号类型一致)

```
DX252366(01-06)01      ← 左右都是英文括号 ✅
DX252366（01-06）01    ← 左右都是中文括号 ✅
ABC(1-5)XYZ           ← 英文括号 ✅
TEST（01-05）         ← 中文括号 ✅
```

### ❌ 错误用法(括号类型不一致)

```
DX252366(01-06）01     ← 左英文右中文 ❌
DX252366（01-06)01     ← 左中文右英文 ❌
ABC(1-5）XYZ          ← 混用 ❌
```

**混用括号会导致无法识别区间,被当作普通字符串处理!**

---

## 🎯 为什么支持中文括号?

### 场景1: 中文输入法
在中文输入法状态下,用户可能习惯性输入中文括号:
```
DX252366（01-06）01
```

### 场景2: Excel复制粘贴
从Excel或其他中文文档复制时,可能包含中文括号。

### 场景3: 提高兼容性
避免因括号类型不同导致的输入错误。

---

## 📋 测试示例

### 测试1: 英文括号
**输入:**
```
DX252366(01-06)01
```

**预期输出:**
```
待处理的样品编号（共 6 个）: DX2523660101, DX2523660201, DX2523660301, DX2523660401, DX2523660501, DX2523660601
```

---

### 测试2: 中文括号
**输入:**
```
DX252366（01-06）01
```

**预期输出:**
```
待处理的样品编号（共 6 个）: DX2523660101, DX2523660201, DX2523660301, DX2523660401, DX2523660501, DX2523660601
```

---

### 测试3: 混合使用(对话框)
**输入:**
```
DX252366(01-06)01, ABC（1-3）XYZ
```

**预期输出:**
```
待处理的样品编号（共 9 个）: 
DX2523660101, DX2523660201, DX2523660301, DX2523660401, DX2523660501, DX2523660601,
ABC1XYZ, ABC2XYZ, ABC3XYZ
```

---

### 测试4: TXT文件
创建 `test.txt`:
```txt
# 英文括号
DX252366(01-06)01

# 中文括号
ABC（1-5）

# 混合使用(每行独立)
TEST(01-03)
SAMPLE（10-12）
```

**预期展开:**
```
DX2523660101, 0201, 0301, 0401, 0501, 0601
ABC1, ABC2, ABC3, ABC4, ABC5
TEST01, TEST02, TEST03
SAMPLE10, SAMPLE11, SAMPLE12
```

---

## 🔍 技术实现

### 正则表达式匹配

**英文括号:**
```python
r'^(.*?)\((\d+)-(\d+)\)(.*)$'
```

**中文括号:**
```python
r'^(.*?)（(\d+)-(\d+)）(.*)$'
```

### 匹配优先级
1. 先尝试匹配英文括号
2. 如果失败,再尝试匹配中文括号
3. 都失败则作为普通字符串处理

---

## 🚀 测试命令

```powershell
python.exe .\main.py
```

### 测试场景:

1. **输入英文括号**: `DX252366(01-06)01`
2. **输入中文括号**: `DX252366（01-06）01`
3. **混合输入**: `DX252366(01-03)01, ABC（1-5）`
4. **错误格式**: `DX252366(01-06）01` (混用,看是否正确拒绝)

---

## 💡 最佳实践

### 推荐使用英文括号
```
DX252366(01-06)01  ← 推荐
```

**理由:**
- ✅ 更符合编程习惯
- ✅ 跨平台兼容性更好
- ✅ 避免输入法切换

### 中文括号适用场景
```
DX252366（01-06）01
```

**适用于:**
- 从中文文档复制粘贴
- 用户习惯中文输入
- 提高用户体验

---

## ✨ 总结

✅ **双括号支持**: 英文`()`和中文`（）`  
✅ **必须一致**: 左右括号类型相同  
✅ **自动识别**: 无需手动指定  
✅ **向后兼容**: 不影响现有功能  
✅ **提高易用性**: 减少输入错误

现在可以自由使用中英文括号输入区间了! 🎉
